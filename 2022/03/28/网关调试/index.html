<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="路由器 1192.168.0.1  用户名：admin 密码：admin123 网关 1192.168.1.1      网关 Mosquitto下载 文档 Linux版本下： 1mosquitto -c &#x2F;etc&#x2F;mosquitto&#x2F;mosquitto.conf -v    1mosquitto_sub -u cola -P 123456 -t &amp;#x27;dissun&#x2F;topic&amp;#x27;">
<meta property="og:type" content="article">
<meta property="og:title" content="网关调试">
<meta property="og:url" content="http://example.com/2022/03/28/%E7%BD%91%E5%85%B3%E8%B0%83%E8%AF%95/index.html">
<meta property="og:site_name" content="藏经阁">
<meta property="og:description" content="路由器 1192.168.0.1  用户名：admin 密码：admin123 网关 1192.168.1.1      网关 Mosquitto下载 文档 Linux版本下： 1mosquitto -c &#x2F;etc&#x2F;mosquitto&#x2F;mosquitto.conf -v    1mosquitto_sub -u cola -P 123456 -t &amp;#x27;dissun&#x2F;topic&amp;#x27;">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220212100955585.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220119154027682.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220118141203419.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220118144124059.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220118144144053.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220120181335982.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220118190229692.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122093213821.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122120521466.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122120558559.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122121101053.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122121145237.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122121414031.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122121432209.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122123002201.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122123414135.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220211112327370.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220213101416214.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220213101444661.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220213103117057.png">
<meta property="og:image" content="c:/Users/Jimmy/AppData/Roaming/Typora/typora-user-images/image-20220213112835161.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220223150027474.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220214114457724.png">
<meta property="og:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220214114627497.png">
<meta property="article:published_time" content="2022-03-28T04:56:33.000Z">
<meta property="article:modified_time" content="2022-06-21T10:28:25.087Z">
<meta property="article:author" content="FreeJim">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220212100955585.png">

<link rel="canonical" href="http://example.com/2022/03/28/%E7%BD%91%E5%85%B3%E8%B0%83%E8%AF%95/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>网关调试 | 藏经阁</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

  <meta name="baidu-site-verification" content="code-ezgXxhziUq" />
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">藏经阁</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/28/%E7%BD%91%E5%85%B3%E8%B0%83%E8%AF%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="FreeJim">
      <meta itemprop="description" content="Hello World">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="藏经阁">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          网关调试
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-28 12:56:33" itemprop="dateCreated datePublished" datetime="2022-03-28T12:56:33+08:00">2022-03-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-06-21 18:28:25" itemprop="dateModified" datetime="2022-06-21T18:28:25+08:00">2022-06-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>路由器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.0.1</span><br></pre></td></tr></table></figure>

<p>用户名：admin</p>
<p>密码：admin123</p>
<p>网关</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.1</span><br></pre></td></tr></table></figure>





<h1 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h1><p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220212100955585.png" alt="image-20220212100955585"></p>
<h2 id="Mosquitto"><a href="#Mosquitto" class="headerlink" title="Mosquitto"></a>Mosquitto</h2><p><a target="_blank" rel="noopener" href="https://mosquitto.org/download">下载</a></p>
<p><a target="_blank" rel="noopener" href="https://mosquitto.org/documentation/">文档</a></p>
<p>Linux版本下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mosquitto -c /etc/mosquitto/mosquitto.conf -v</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mosquitto_sub -u cola -P 123456 -t <span class="string">&#x27;dissun/topic&#x27;</span> -v</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mosquitto_pub -u cola1 -P 123456 -t <span class="string">&#x27;dissun/topic&#x27;</span> -m <span class="string">&#x27;腰疼不加班&#x27;</span></span><br></pre></td></tr></table></figure>



<p>linux：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mosquitto -c mosquitto.conf --verbose</span><br></pre></td></tr></table></figure>





<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mosquitto_sub -h localhost -t <span class="string">&quot;game&quot;</span> -u cola -P 123456 -i <span class="string">&quot;subscriber&quot;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mosquitto_pub -h localhost -t <span class="string">&quot;game&quot;</span> -u cola -P 123456 -i <span class="string">&quot;publisher&quot;</span> -m <span class="string">&quot;How are you?&quot;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ap</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 pid</span><br></pre></td></tr></table></figure>





<h3 id="subscribe"><a href="#subscribe" class="headerlink" title="subscribe"></a>subscribe</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mqtt服务器收到订阅请求</span></span><br><span class="line">Received SUBSCRIBE from subscriber</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主题</span></span><br><span class="line">dissun/topic (QoS 1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取1号</span></span><br><span class="line">subscriber 1 dissun/topic</span><br><span class="line"></span><br><span class="line"><span class="comment"># subscribe ACK</span></span><br><span class="line">Sending SUBACK to subscriber</span><br></pre></td></tr></table></figure>



<h3 id="Qos"><a href="#Qos" class="headerlink" title="Qos"></a>Qos</h3><p>MQTT消息质量有三个等级，QoS 0，QoS 1和 QoS 2</p>
<p>QoS 0：最多分发一次。消息的传递完全依赖底层的TCP/IP网络，协议里没有定义应答和重试，消息要么只会到达服务端一次，要么根本没有到达。</p>
<p>QoS 1：至少分发一次。服务器的消息接收由PUBACK消息进行确认，如果通信链路或发送设备异常，或者指定时间内没有收到确认消息，发送端会重发这条在消息头中设置了DUP位的消息。</p>
<p>QoS 2：只分发一次。这是最高级别的消息传递，消息丢失和重复都是不可接受的，使用这个服务质量等级会有额外的开销。</p>
<h3 id="允许同个账号多端登陆"><a href="#允许同个账号多端登陆" class="headerlink" title="允许同个账号多端登陆"></a>允许同个账号多端登陆</h3><h3 id="publisher"><a href="#publisher" class="headerlink" title="publisher"></a>publisher</h3><p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220119154027682.png" alt="image-20220119154027682"></p>
<p>不是代码的问题，那就是SDK的问题</p>
<h3 id="连续创建多个subscriber"><a href="#连续创建多个subscriber" class="headerlink" title="连续创建多个subscriber"></a>连续创建多个subscriber</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">connected!</span><br><span class="line">subscriber error</span><br><span class="line">MRT:unknown (32109) - java.io.IOException: socket write error</span><br><span class="line"> - org/eclipse/paho/client/mqttv3/internal/CommsSender.handleRunException(), bci=35</span><br><span class="line"> - org/eclipse/paho/client/mqttv3/internal/CommsSender.run(), bci=178</span><br><span class="line"> - java/lang/Thread.run(), bci=5</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>



<h3 id="对自己的代码自信"><a href="#对自己的代码自信" class="headerlink" title="对自己的代码自信"></a>对自己的代码自信</h3><p>可能会是别人的东西的问题</p>
<p>josh模拟器的问题</p>
<h3 id="网关自己的jvm"><a href="#网关自己的jvm" class="headerlink" title="网关自己的jvm"></a>网关自己的jvm</h3><p>别人想搞都不一定能搞</p>
<p>从某种角度来说。。</p>
<p>更加安全</p>
<h3 id="端口占用"><a href="#端口占用" class="headerlink" title="端口占用"></a>端口占用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano</span><br></pre></td></tr></table></figure>





<h3 id="端口号"><a href="#端口号" class="headerlink" title="端口号"></a>端口号</h3><p>pid 336</p>
<p>port 1883</p>
<h3 id="bci"><a href="#bci" class="headerlink" title="bci"></a>bci</h3><p>byte code index</p>
<p>A single line, even a single Java statement, may translate to several bytecode instructions. The byte code index tells you which bytecode instruction was executed</p>
<p>it would only be relevant if you need to examine the behaviour of code at the level of individual bytecode instructions. </p>
<p>Most Java programmers will never need this</p>
<p>probably only people who develop compilers or tools that manipulate bytecode do</p>
<h3 id="密码错误"><a href="#密码错误" class="headerlink" title="密码错误"></a>密码错误</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Client cola1 disconnected, not authorised.</span><br></pre></td></tr></table></figure>





<h3 id="MQTT全局监听"><a href="#MQTT全局监听" class="headerlink" title="MQTT全局监听"></a>MQTT全局监听</h3><p>conf</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bind_address 0.0.0.0</span><br></pre></td></tr></table></figure>

<p>linux上一样配置</p>
<h3 id="Linux版本"><a href="#Linux版本" class="headerlink" title="Linux版本"></a>Linux版本</h3><h2 id="apoll"><a href="#apoll" class="headerlink" title="apoll"></a>apoll</h2><p><a target="_blank" rel="noopener" href="http://archive.apache.org/dist/activemq/activemq-apollo/1.7.1/">下载</a></p>
<p>cmd管理员进入bin</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apollo create myapollo D:\apache-apollo\broker</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apollo-broker run</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># you can setup the broker as Windows service and run it in the background:</span><br><span class="line"></span><br><span class="line">apollo-broker-service install</span><br><span class="line"></span><br><span class="line">apollo-broker-service start</span><br></pre></td></tr></table></figure>

<p>登录 <a href="https://link.zhihu.com/?target=http://127.0.0.1:61680">http://127.0.0.1:61680</a> 即可</p>
<p>默认账号 admin，密码 password</p>
<p>注意这里后台管理的端口是 61680</p>
<p>MQTT服务的端口是 61613</p>
<h2 id="网关lan口"><a href="#网关lan口" class="headerlink" title="网关lan口"></a>网关lan口</h2><p>Local Area Network</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">169.254.4.1</span><br></pre></td></tr></table></figure>

<p>电脑接到网关上</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">169.254.97.199/255.255.0.0</span><br></pre></td></tr></table></figure>

<h2 id="WAN"><a href="#WAN" class="headerlink" title="WAN"></a>WAN</h2><p>Wide Area Network</p>
<h2 id="SIM"><a href="#SIM" class="headerlink" title="SIM"></a>SIM</h2><p>sim卡从consle走数据，到电脑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10.97.8.235</span><br></pre></td></tr></table></figure>





<h2 id="桥接"><a href="#桥接" class="headerlink" title="桥接"></a>桥接</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.10</span><br></pre></td></tr></table></figure>

<p>有两台设备，但是又没有路由器，那么把他们桥接在一起，可以共享其中一台的网络，这样两台都可以上网，这两台设备也可以是vm，不一定是物理设备</p>
<p>被桥接的叫做主路由器，执行桥接的叫副路由器</p>
<h2 id="Java-ME"><a href="#Java-ME" class="headerlink" title="Java ME"></a>Java ME</h2><p>Micro Edition</p>
<h1 id="josh-环境配置"><a href="#josh-环境配置" class="headerlink" title="josh 环境配置"></a>josh 环境配置</h1><h2 id="驱动"><a href="#驱动" class="headerlink" title="驱动"></a>驱动</h2><p><code>设备管理器</code></p>
<p><code>Port_#0003.Hub_#0001</code></p>
<p>属性 - 手动更新驱动</p>
<h1 id="josh-E9500网关开发"><a href="#josh-E9500网关开发" class="headerlink" title="josh-E9500网关开发"></a>josh-E9500网关开发</h1><p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220118141203419.png" alt="image-20220118141203419"></p>
<h2 id="官方demo"><a href="#官方demo" class="headerlink" title="官方demo"></a>官方demo</h2><p><a target="_blank" rel="noopener" href="https://www.joshvm.com/product/joshgateway">demo</a></p>
<h2 id="导入jar包"><a href="#导入jar包" class="headerlink" title="导入jar包"></a>导入jar包</h2><p>右键项目</p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220118144124059.png" alt="image-20220118144124059"></p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220118144144053.png" alt="image-20220118144144053"></p>
<p>放lib</p>
<p>然后Add JARs</p>
<h2 id="导出jar包"><a href="#导出jar包" class="headerlink" title="导出jar包"></a>导出jar包</h2><p>右键项目 - Export</p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220120181335982.png" alt="image-20220120181335982"></p>
<h2 id="合并jar包"><a href="#合并jar包" class="headerlink" title="合并jar包"></a>合并jar包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压jar包</span></span><br><span class="line"></span><br><span class="line">jar -xvf xx.jar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除jar包</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 由类生成jar包（最后边的点别忘了）</span></span><br><span class="line"></span><br><span class="line">jar -cvfM game.jar .</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h2 id="运行jar包"><a href="#运行jar包" class="headerlink" title="运行jar包"></a>运行jar包</h2><p>使用cldc_vm</p>
<p>(JoshVM\SDK\bin)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cldc_vm -cp Publisher.jar Publisher</span><br></pre></td></tr></table></figure>





<h2 id="clcd（Josh运行jar包的工具）"><a href="#clcd（Josh运行jar包的工具）" class="headerlink" title="clcd（Josh运行jar包的工具）"></a>clcd（Josh运行jar包的工具）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cldc_vm -cp /Publisher.jar Publisher</span><br></pre></td></tr></table></figure>



<p>/usr/bin</p>
<h2 id="adb文件传输"><a href="#adb文件传输" class="headerlink" title="adb文件传输"></a>adb文件传输</h2><h2 id="多个终端"><a href="#多个终端" class="headerlink" title="多个终端"></a>多个终端</h2><p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220118190229692.png" alt="image-20220118190229692"></p>
<h2 id="Linux版本-1"><a href="#Linux版本-1" class="headerlink" title="Linux版本"></a>Linux版本</h2><p>Linux 3.18 <a target="_blank" rel="noopener" href="https://lkml.org/lkml/2014/12/7/202">has been released</a> on Sun, 7 Dec 2014</p>
<h2 id="windows-防火墙"><a href="#windows-防火墙" class="headerlink" title="windows 防火墙"></a>windows 防火墙</h2><p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122093213821.png" alt="image-20220122093213821"></p>
<p>不用具体再对端口进行开放</p>
<h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><p> 入站</p>
<p>Windows上密码错误</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MRT:unknown (32103) - java.io.IOException: IOError <span class="keyword">in</span> socket open</span><br><span class="line"> - org/eclipse/paho/client/mqttv3/internal/TCPMicroNetworkModule.start(), bci=111</span><br><span class="line"> - org/eclipse/paho/client/mqttv3/internal/ClientComms<span class="variable">$ConnectBG</span>.run(), bci=95</span><br><span class="line"> - java/lang/Thread.run(), bci=5</span><br></pre></td></tr></table></figure>

<p>网关上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MRT:unknown (32103) - java.io.IOException: IOError <span class="keyword">in</span> socket open</span><br><span class="line"> - org/eclipse/paho/client/mqttv3/internal/TCPMicroNetworkModule.start(), bci=111</span><br><span class="line"> - org/eclipse/paho/client/mqttv3/internal/ClientComms<span class="variable">$ConnectBG</span>.run(), bci=95</span><br><span class="line"> - java/lang/Thread.run(), bci=5</span><br></pre></td></tr></table></figure>

<p>原因：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mosquitto 只监听了127.0.0.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 应该配置为监听0.0.0.0</span></span><br></pre></td></tr></table></figure>



<h2 id="MQTT全局监听-1"><a href="#MQTT全局监听-1" class="headerlink" title="MQTT全局监听"></a>MQTT全局监听</h2><p>conf</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bind_address 0.0.0.0</span><br></pre></td></tr></table></figure>





<h2 id="HTTP与TCP"><a href="#HTTP与TCP" class="headerlink" title="HTTP与TCP"></a>HTTP与TCP</h2><p>http底层也是socket的链接</p>
<h2 id="TFTP"><a href="#TFTP" class="headerlink" title="TFTP"></a>TFTP</h2><p>Trivial File Transport Protocol</p>
<p>（简单文本传输协议）</p>
<p>TFTP是FTP协议的简化版</p>
<p>它运行在UDP协议上，同时简化了很多FTP操作，只支持文件的传输功能</p>
<p><a target="_blank" rel="noopener" href="https://www.tftp-server.com/">Win10_TFTP_Server</a></p>
<h3 id="IP准入"><a href="#IP准入" class="headerlink" title="IP准入"></a>IP准入</h3><p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122120521466.png" alt="image-20220122120521466"></p>
<h3 id="上传设置"><a href="#上传设置" class="headerlink" title="上传设置"></a>上传设置</h3><p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122120558559.png" alt="image-20220122120558559"></p>
<h3 id="防火墙配置"><a href="#防火墙配置" class="headerlink" title="防火墙配置"></a>防火墙配置</h3><p>Windows安全中心 - 防火墙和网络保护 - 允许应用通过防火墙</p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122121101053.png" alt="image-20220122121101053"></p>
<p>更改设置 - 允许其他应用 - 浏览 - 专用、公用打上勾</p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122121145237.png" alt="image-20220122121145237"></p>
<p>（默认是开启的）</p>
<h3 id="文件传输"><a href="#文件传输" class="headerlink" title="文件传输"></a>文件传输</h3><h4 id="网关-1"><a href="#网关-1" class="headerlink" title="网关"></a>网关</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tftp -g -r \hello.txt -l /hello.txt 192.168.1.44</span><br></pre></td></tr></table></figure>



<h4 id="win10"><a href="#win10" class="headerlink" title="win10"></a>win10</h4><p>找到虚拟文件夹</p>
<p>把文件拖拽进去就行</p>
<p>默认位置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\ProgramData\WinAgents\TFTP Server 4\TFTPRoot</span><br></pre></td></tr></table></figure>



<p>如果要使用命令行的形式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tftp 127.0.0.1 put G:\Project\hello.txt \hello.txt</span><br></pre></td></tr></table></figure>

<p>如果要受用命令行的话，需要开启Win10的TFTP服务的Client</p>
<p>控制面板 - 程序和功能 - 启用或关闭Windows功能</p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122121414031.png" alt="image-20220122121414031"></p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122121432209.png" alt="image-20220122121432209"></p>
<p>再之后则是同上，在防火墙中允许该应用与外部通信</p>
<h2 id="GPL"><a href="#GPL" class="headerlink" title="GPL"></a>GPL</h2><p>简而言之是一种licence</p>
<p>General Public License, GNU通用公共许可协议</p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122123002201.png" alt="image-20220122123002201"></p>
<h3 id="Busy-Box"><a href="#Busy-Box" class="headerlink" title="Busy Box"></a>Busy Box</h3><p>工具集，包括类似vi的工具</p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220122123414135.png" alt="image-20220122123414135"></p>
<h3 id="Unix-and-Linux"><a href="#Unix-and-Linux" class="headerlink" title="Unix and Linux"></a>Unix and Linux</h3><p>The UNIX OS was born in the late 1960s. </p>
<p>AT&amp;T Bell Labs released an operating system called Unix written in C</p>
<p>which allows quicker modification, acceptance, and portability.</p>
<p>Linux source code is available to the general public whereas, in Unix, the source code is proprietary</p>
<h2 id="adb"><a href="#adb" class="headerlink" title="adb"></a>adb</h2><p>电脑到手机</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb push test.txt /sdcard/test</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb pull /sdcard/test/test.txt D:/test</span><br></pre></td></tr></table></figure>





<h1 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h1><h2 id="intellij导出jar包"><a href="#intellij导出jar包" class="headerlink" title="intellij导出jar包"></a>intellij导出jar包</h2><p><code>Project Structure</code> - <code>Artifacts </code>- <code>JAR</code> - <code>From modules</code></p>
<p>这里注意，把<code>META-INF</code>放到<code>src</code>下，而不要放到<code>java</code>下</p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220211112327370.png" alt="image-20220211112327370"></p>
<p>（不然会出现<code>没有主清单属性</code>的问题）</p>
<p>然后需要把<code>jar包</code>给<code>build</code>出来</p>
<p><code>Build</code> - <code>Build Artifacts</code></p>
<p>如果这个行不通，则使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn package</span><br></pre></td></tr></table></figure>

<p>打出<code>live-0.0.1-SNAPSHOT.jar</code>这样的包</p>
<h2 id="Linux-下查看见监听"><a href="#Linux-下查看见监听" class="headerlink" title="Linux 下查看见监听"></a>Linux 下查看见监听</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i :8080</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill 端口号</span><br></pre></td></tr></table></figure>







<h1 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h1><h2 id="wan和lan要在不同网段"><a href="#wan和lan要在不同网段" class="headerlink" title="wan和lan要在不同网段"></a>wan和lan要在不同网段</h2><p>wan没分好的话，设置静态的</p>
<h1 id="VPN"><a href="#VPN" class="headerlink" title="VPN"></a>VPN</h1><h2 id="VPN自启动"><a href="#VPN自启动" class="headerlink" title="VPN自启动"></a>VPN自启动</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pptpd_status=`pgrep pptpd`</span><br><span class="line">stop=&quot;&quot;</span><br><span class="line">if [ $pptpd_status == $stop ]</span><br><span class="line">then</span><br><span class="line">/etc/init.d/pptpd restart</span><br><span class="line"></span><br><span class="line">else</span><br><span class="line">echo &quot;pptp已启动&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>





<p>VPN服务器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@47.94.138.85 -v</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1a1a1a1A</span><br></pre></td></tr></table></figure>



<p>vpn的账号密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">123456</span><br></pre></td></tr></table></figure>



<p>ssh_exchange_identification: read: Connection reset</p>
<p>没网</p>
<h2 id="iptable"><a href="#iptable" class="headerlink" title="iptable"></a>iptable</h2><p> iptable是管ip和防火墙</p>
<h2 id="PPTP"><a href="#PPTP" class="headerlink" title="PPTP"></a>PPTP</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/pptpd restart</span><br></pre></td></tr></table></figure>





<p>pptp安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install pptpd</span><br></pre></td></tr></table></figure>

<p>VPN的IP配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/pptpd.conf</span><br></pre></td></tr></table></figure>

<p>添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># localip 为VPN搭建成功后，该VPN服务器的IP</span><br><span class="line"># remoteip 为VPN服务器将会分配的IP范围</span><br><span class="line"></span><br><span class="line">localip 192.168.0.1</span><br><span class="line">remoteip 192.168.0.234-238,192.168.0.245</span><br></pre></td></tr></table></figure>

<p>Ps：这里可以自行配置，原则是<code>localip</code>在局域网内不会与其他ip重复</p>
<hr>
<p>VPN账号密码设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ppp/chap-secrets</span><br></pre></td></tr></table></figure>

<p>添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># client server secret IP</span><br><span class="line"># secret 为该用户的密码，用于VPN客户端登陆</span><br><span class="line">root  pptpd  123456 *</span><br></pre></td></tr></table></figure>

<hr>
<p>DNS设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ppp/pptpd-options</span><br></pre></td></tr></table></figure>

<p>添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ms-dns 223.5.5.5</span><br><span class="line">ms-dns 223.6.6.6</span><br></pre></td></tr></table></figure>

<hr>
<p>开启转发</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysctl.conf</span><br></pre></td></tr></table></figure>

<p>添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.ip_forward=1</span><br></pre></td></tr></table></figure>

<p>更新sysctl的配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sysctl -p</span><br></pre></td></tr></table></figure>

<hr>
<p>安装iptables（配置防火墙的）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install iptables</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">一、</span><br><span class="line"># 这里的ip地址要与上面localip对应</span><br><span class="line"># 如果localip是192.168.7.1</span><br><span class="line"># 则这里就应该是192.168.7.0/24</span><br><span class="line">iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -o eth0 -j MASQUERADE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">二、</span><br><span class="line"># ip同上</span><br><span class="line"># 对应上的话，则192.168.7.0/255.255.255.0</span><br><span class="line"># *为阿里云服务器的公网IP</span><br><span class="line">iptables -t nat -A POSTROUTING -s 192.168.0.0/255.255.255.0 -j SNAT --to-source *</span><br><span class="line"></span><br><span class="line">三、</span><br><span class="line">#保存iptables设置</span><br><span class="line">iptables-save</span><br></pre></td></tr></table></figure>



<p>开启1723端口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo  ufw allow 1723/tcp</span><br></pre></td></tr></table></figure>





<p>重新启动pptp</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/pptpd restart</span><br></pre></td></tr></table></figure>



<p>阿里云安全组开放1723端口</p>
<p>自启动配置</p>
<p>其他参考</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/limoyun/p/ubuntu-pptp-vpn.html">参考1</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.aliyun.com/article/822178">参考2</a></p>
<p><a target="_blank" rel="noopener" href="https://www.kancloud.cn/digest/comp/122505">参考3</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/TrueNight90/article/details/111169160">参考4</a></p>
<h2 id="ping端口"><a href="#ping端口" class="headerlink" title="ping端口"></a>ping端口</h2><h2 id="路由配置"><a href="#路由配置" class="headerlink" title="路由配置"></a>路由配置</h2><p>添加静态路由</p>
<h3 id="VPN服务器端"><a href="#VPN服务器端" class="headerlink" title="VPN服务器端"></a>VPN服务器端</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 发往192.168.1.0网段的IP包会通过ppp0发送</span><br><span class="line"># 有这一个就行了</span><br><span class="line">route add -net 192.168.1.0 netmask 255.255.255.0 dev ppp0</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 发往192.168.7.0网段的IP包会通过ppp1发送</span><br><span class="line">route add -net 192.168.7.0 netmask 255.255.255.0 dev ppp1</span><br></pre></td></tr></table></figure>





<p>先连接的为ppp0</p>
<p>新加进来的往前补到ppp0</p>
<h3 id="路由器端"><a href="#路由器端" class="headerlink" title="路由器端"></a>路由器端</h3><p>访问<code>192.168.7.0/24</code>的请求，路由到<code>192.168.1.0/24</code></p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220213101416214.png" alt="image-20220213101416214"></p>
<p><code>192.168.1.0/24</code>的response也指定路由到<code>192.168.7.0/24</code></p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220213101444661.png" alt="image-20220213101444661"></p>
<p>VPN客户端的设置</p>
<p>默认就行</p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220213103117057.png" alt="image-20220213103117057"></p>
<p>1会变成0？？？</p>
<p><img src="C:\Users\Jimmy\AppData\Roaming\Typora\typora-user-images\image-20220213112835161.png" alt="image-20220213112835161"></p>
<p>有一个断了就重置</p>
<h1 id="服务器端口配置"><a href="#服务器端口配置" class="headerlink" title="服务器端口配置"></a>服务器端口配置</h1><p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220223150027474.png" alt="image-20220223150027474"></p>
<h1 id="shell脚本"><a href="#shell脚本" class="headerlink" title="shell脚本"></a>shell脚本</h1><h2 id="路由脚本"><a href="#路由脚本" class="headerlink" title="路由脚本"></a>路由脚本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 获取网卡信息</span></span><br><span class="line">echo `/sbin/ifconfig` &gt; /temp/ifconfig.txt</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提取网卡串</span></span><br><span class="line">echo `/bin/grep -o &quot;ppp[0-9]*:&quot; /temp/ifconfig.txt` &gt; /temp/dev.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> ppp0: ppp1:</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提取ip串</span></span><br><span class="line">echo `/bin/grep -o &quot;destination [0-9]*.[0-9]*.[0-9]*.[0-9]*&quot; /temp/ifconfig.txt` &gt; /temp/ip.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> destination 192.168.7.100 destination 192.168.7.102</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提取网卡列表到数组</span></span><br><span class="line">dev_list=()</span><br><span class="line">dev_num=`/usr/bin/awk -F &#x27;[ :]&#x27; &#x27;&#123;print NF&#125;&#x27; /temp/dev.txt`</span><br><span class="line">i=1</span><br><span class="line">while(( $i&lt;=$dev_num ))</span><br><span class="line">do</span><br><span class="line">dev_list=(`/usr/bin/awk -v a=$i -F &#x27;[ :]&#x27; &#x27;&#123;print $a&#125;&#x27; /temp/dev.txt` $&#123;dev_list[@]&#125;)</span><br><span class="line">let &quot;i=i+2&quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提取ip列表到数组</span></span><br><span class="line">ip_list=()</span><br><span class="line">ip_num=$dev_num</span><br><span class="line">i=2</span><br><span class="line">while(( $i&lt;=$ip_num ))</span><br><span class="line">do</span><br><span class="line">ip_list=(`/usr/bin/awk -v a=$i &#x27;&#123;print $a&#125;&#x27; /temp/ip.txt` $&#123;ip_list[@]&#125;)</span><br><span class="line">let &quot;i=i+2&quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 获取remote路由器的ip串</span></span><br><span class="line">echo `/bin/grep -o &quot;[0-9]*\.[0-9]*\.[0-9]*\.[0-9]*&quot; /etc/ppp/chap-secrets` &gt; /temp/remote_ip.txt</span><br><span class="line">remote_ip_list=()</span><br><span class="line">remote_ip_num=`/usr/bin/awk -F &#x27;[ :]&#x27; &#x27;&#123;print NF&#125;&#x27; /temp/remote_ip.txt`</span><br><span class="line">i=1</span><br><span class="line">while(( $i&lt;=$remote_ip_num ))</span><br><span class="line">do</span><br><span class="line">remote_ip_list=(`/usr/bin/awk -v a=$i &#x27;&#123;print $a&#125;&#x27; /temp/remote_ip.txt` $&#123;remote_ip_list[@]&#125;)</span><br><span class="line">let &quot;i++&quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置路VPN服务器的路由</span></span><br><span class="line">for i in $(/usr/bin/seq 0 $&#123;#dev_list[@]&#125;); do</span><br><span class="line">current_ip=$&#123;ip_list[$i]&#125;</span><br><span class="line">match_res=`/bin/grep -o &quot;$current_ip&quot; /temp/remote_ip.txt`</span><br><span class="line"><span class="meta">#</span><span class="bash"> 怎么避免都是空的情况</span></span><br><span class="line">if test -z $current_ip</span><br><span class="line">then</span><br><span class="line">echo &quot;current_ip为空&quot;</span><br><span class="line"> continue</span><br><span class="line">fi</span><br><span class="line">echo &quot;current_ip is:&quot;</span><br><span class="line">echo $current_ip</span><br><span class="line">echo &quot;match_res is:&quot;</span><br><span class="line">echo $match_res</span><br><span class="line">if [[ $match_res = $current_ip ]]</span><br><span class="line">then</span><br><span class="line"><span class="meta">#</span><span class="bash"> 转换ip到对应网段</span></span><br><span class="line">echo &quot;需要添加路由&quot;</span><br><span class="line">z=&quot;0&quot;</span><br><span class="line">echo $&#123;ip_list[$i]&#125; &gt; /temp/temp.txt</span><br><span class="line">seg=&quot;`grep -o &quot;192.168.[0-9]*.&quot; /temp/temp.txt`$z&quot;</span><br><span class="line">/sbin/route add -net $seg netmask 255.255.255.0 dev $&#123;dev_list[$i]&#125;</span><br><span class="line">fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>



<p>Linux（缩进版，去除缩进之后，才可以直接粘贴进Linux的sh文件）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 获取网卡信息</span></span><br><span class="line">echo `/sbin/ifconfig` &gt; /temp/ifconfig.txt</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提取网卡串</span></span><br><span class="line">echo `/bin/grep -o &quot;ppp[0-9]*:&quot; /temp/ifconfig.txt` &gt; /temp/dev.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> ppp0: ppp1:</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提取ip串</span></span><br><span class="line">echo `/bin/grep -o &quot;destination [0-9]*.[0-9]*.[0-9]*.[0-9]*&quot; /temp/ifconfig.txt` &gt; /temp/ip.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> destination 192.168.7.100 destination 192.168.7.102</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提取网卡列表到数组</span></span><br><span class="line">dev_list=()</span><br><span class="line">dev_num=`/usr/bin/awk -F &#x27;[ :]&#x27; &#x27;&#123;print NF&#125;&#x27; /temp/dev.txt`</span><br><span class="line">i=1</span><br><span class="line">while(( $i&lt;=$dev_num ))</span><br><span class="line">do</span><br><span class="line">        dev_list=(`/usr/bin/awk -v a=$i -F &#x27;[ :]&#x27; &#x27;&#123;print $a&#125;&#x27; /temp/dev.txt` $&#123;dev_list[@]&#125;)</span><br><span class="line">        let &quot;i=i+2&quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 提取ip列表到数组</span></span><br><span class="line">ip_list=()</span><br><span class="line">ip_num=$dev_num</span><br><span class="line">i=2</span><br><span class="line">while(( $i&lt;=$ip_num ))</span><br><span class="line">do</span><br><span class="line">        ip_list=(`/usr/bin/awk -v a=$i &#x27;&#123;print $a&#125;&#x27; /temp/ip.txt` $&#123;ip_list[@]&#125;)</span><br><span class="line">        let &quot;i=i+2&quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 获取remote路由器的ip串</span></span><br><span class="line">echo `/bin/grep -o &quot;[0-9]*\.[0-9]*\.[0-9]*\.[0-9]*&quot; /etc/ppp/chap-secrets` &gt; /temp/remote_ip.txt</span><br><span class="line">remote_ip_list=()</span><br><span class="line">remote_ip_num=`/usr/bin/awk -F &#x27;[ :]&#x27; &#x27;&#123;print NF&#125;&#x27; /temp/remote_ip.txt`</span><br><span class="line">i=1</span><br><span class="line">while(( $i&lt;=$remote_ip_num ))</span><br><span class="line">do</span><br><span class="line">        remote_ip_list=(`/usr/bin/awk -v a=$i &#x27;&#123;print $a&#125;&#x27; /temp/remote_ip.txt` $&#123;remote_ip_list[@]&#125;)</span><br><span class="line">        let &quot;i++&quot;</span><br><span class="line">done</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置路VPN服务器的路由</span></span><br><span class="line">for i in $(/usr/bin/seq 0 $&#123;#dev_list[@]&#125;); do</span><br><span class="line">        current_ip=$&#123;ip_list[$i]&#125;</span><br><span class="line">        match_res=`/bin/grep -o &quot;$current_ip&quot; /temp/remote_ip.txt`</span><br><span class="line">        # 怎么避免都是空的情况</span><br><span class="line">        if test -z $current_ip</span><br><span class="line">        then</span><br><span class="line">                echo &quot;current_ip为空&quot;</span><br><span class="line">                continue</span><br><span class="line">        fi</span><br><span class="line">        echo &quot;current_ip is:&quot;</span><br><span class="line">        echo $current_ip</span><br><span class="line">        echo &quot;match_res is:&quot;</span><br><span class="line">        echo $match_res</span><br><span class="line">        if [[ $match_res = $current_ip ]]</span><br><span class="line">        then</span><br><span class="line">                # 转换ip到对应网段</span><br><span class="line">                echo &quot;需要添加路由&quot;</span><br><span class="line">                z=&quot;0&quot;</span><br><span class="line">                echo $&#123;ip_list[$i]&#125; &gt; /temp/temp.txt</span><br><span class="line">                seg=&quot;`grep -o &quot;192.168.[0-9]*.&quot; /temp/temp.txt`$z&quot;</span><br><span class="line">                /sbin/route add -net $seg netmask 255.255.255.0 dev $&#123;dev_list[$i]&#125;</span><br><span class="line">        fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>







<p>$是不带字符串双引号的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo `cat /etc/ppp/chap-secrets` &gt; /root/temp/xxxxxx.txt</span><br></pre></td></tr></table></figure>









<h2 id="定时执行-Crontab"><a href="#定时执行-Crontab" class="headerlink" title="定时执行 Crontab"></a>定时执行 Crontab</h2><p><strong>Ps：运行的像<code>ifconfig</code>等命令一定要全路径！</strong></p>
<p>怎么找</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which grep</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<p>输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 每一分钟执行一次</span></span><br><span class="line">*/1 * * * * /root/temp/auto-print.sh</span><br></pre></td></tr></table></figure>



<p>重启</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/sbin/service crond reload</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service cron restart</span><br></pre></td></tr></table></figure>

<p>为cron可以按配置多久时间运行一次。当cron执行此操作时，它通常作为root用户运行，这样做会为所述用户创建一个会话。</p>
<h2 id="为什么写shell脚本"><a href="#为什么写shell脚本" class="headerlink" title="为什么写shell脚本"></a>为什么写shell脚本</h2><p>自启动、移植性</p>
<h2 id="反引号"><a href="#反引号" class="headerlink" title="反引号"></a>反引号</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Tab上边的那个点</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 命令在赋值之前就已经执行了</span></span><br><span class="line">result=`date`</span><br><span class="line"></span><br><span class="line">echo $result</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>commands 可以只有一个命令，也可以有多个命令，多个命令之间以分号<code>;</code>分隔。</p>
<h2 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 xxx</span><br></pre></td></tr></table></figure>



<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 临时变量，退出登录后就没了</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 赋值</span></span><br><span class="line">test=&quot;123456&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">取值 - 美元符号</span></span><br><span class="line">echo $test</span><br></pre></td></tr></table></figure>





<h2 id="字符串处理"><a href="#字符串处理" class="headerlink" title="字符串处理"></a>字符串处理</h2><p>字符串的下标从1开始</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">test=&quot;123456&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 截取从0的下一位开始，长度为3的字符串</span></span><br><span class="line">echo $&#123;test:0:3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 123</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查找下标</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">test</span>字符串中有空格，需要加双引号</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 这里要查找的是第一个符合条件的字符所在的位置,和我的需求不符</span></span><br><span class="line">expr index &quot;$&#123;test&#125;&quot; &quot;2&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="输出结果重定向到文件"><a href="#输出结果重定向到文件" class="headerlink" title="输出结果重定向到文件"></a>输出结果重定向到文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> &gt;&gt;追加, &gt;重写</span></span><br><span class="line">echo `ifconfig` &gt;&gt;test.txt</span><br></pre></td></tr></table></figure>



<h2 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/pam.d</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim common-session-noninteractive</span><br></pre></td></tr></table></figure>

<p>添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">session [success=1 default=ignore] pam_succeed_if.so service in cron quiet use_uid</span><br></pre></td></tr></table></figure>

<p>重启crontab</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>







<h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><h3 id="命令行参数"><a href="#命令行参数" class="headerlink" title="命令行参数"></a>命令行参数</h3><p><code>-n</code>直接查看在文本中的位置</p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220214114457724.png" alt="image-20220214114457724"></p>
<p><code>-o</code>：只显示匹配PATTERN 部分</p>
<p><img src="https://picgo-freejim.oss-cn-beijing.aliyuncs.com/to_upload/image-20220214114627497.png" alt="image-20220214114627497"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -o &quot;ppp.*destination [0-9]*.[0-9]*.[0-9]*.[0-9]*&quot; test.txt</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ppp0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt; mtu 1396 inet 192.168.7.1 netmask 255.255.255.255 destination 192.168.7.100</span><br></pre></td></tr></table></figure>



<p>则有</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pp=`grep -o &quot;ppp.*destination [0-9]*.[0-9]*.[0-9]*.[0-9]*&quot; test.txt`</span><br><span class="line">echo $pp</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ppp0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt; mtu 1396 inet 192.168.7.1 netmask 255.255.255.255 destination 192.168.7.100</span><br></pre></td></tr></table></figure>



<h3 id="多个grep"><a href="#多个grep" class="headerlink" title="多个grep"></a>多个grep</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep word1 file.txt | grep word2 |grep word3</span><br><span class="line"><span class="meta">#</span><span class="bash"> 必须同时满足三个条件（word1、word2和word3）才匹配。</span></span><br></pre></td></tr></table></figure>





<h3 id="实例分析"><a href="#实例分析" class="headerlink" title="实例分析"></a>实例分析</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo `grep -o &quot;ppp.* destination [0-9]*.[0-9]*.[0-9]*.[0-9]*&quot; ifconfig.txt`</span><br></pre></td></tr></table></figure>

<p>结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ppp0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt; mtu 1396 inet 192.168.7.1 netmask 255.255.255.255 destination 192.168.7.100 ppp txqueuelen 3 (Point-to-Point Protocol) RX packets 1303 bytes 83535 (83.5 KB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 9 bytes 318 (318.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 ppp1: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt; mtu 1396 inet 192.168.7.1 netmask 255.255.255.255 destination 192.168.7.102</span><br></pre></td></tr></table></figure>

<p>匹配认为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ppp0 .* 192.168.7.102</span><br></pre></td></tr></table></figure>

<p>中间一大段都匹配到<code>.*</code>去了</p>
<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><h2 id="字符串slice"><a href="#字符串slice" class="headerlink" title="字符串slice"></a>字符串slice</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 文本内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ppp0: ppp1:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 每行按空格或TAB分割，输出文本中的1项</span></span><br><span class="line">awk &#x27;&#123;print $1&#125;&#x27; dev.txt</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 先按空格分割，再按:分割</span></span><br><span class="line">awk -F &#x27;[ :]&#x27; &#x27;&#123;print $1&#125;&#x27; dev.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> 结果:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ppp0</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ps: <span class="variable">$3</span>才是ppp1</span></span><br><span class="line">awk -F &#x27;[ :]&#x27; &#x27;&#123;print $3&#125;&#x27; dev.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> 结果:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ppp1</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="variable">$2</span>的结果是null</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> NF 表示结果分割结果个数</span></span><br><span class="line">awk -F &#x27;[ :]&#x27; &#x27;&#123;print NF&#125;&#x27; dev.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> 结果：</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 文本内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> destination 192.168.7.100 destination 192.168.7.102</span></span><br><span class="line">awk &#x27;&#123;print $1&#125;&#x27; ip.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if [[ $STATUS = $rr ]]</span><br></pre></td></tr></table></figure>



<h2 id="字符串判空"><a href="#字符串判空" class="headerlink" title="字符串判空"></a>字符串判空</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if test -z $str1</span><br><span class="line">then</span><br><span class="line">    echo &quot;str1 is empty&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;str1 is not empty&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>







<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dev_list=()</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 新增元素</span></span><br><span class="line">dev_list=(1 $&#123;dev_list[@]&#125;)</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 取元素</span></span><br><span class="line">echo $&#123;dev_list[0]&#125;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/03/28/%E5%B1%8F%E5%B9%95%E8%B0%83%E8%AF%95/" rel="prev" title="屏幕调试">
      <i class="fa fa-chevron-left"></i> 屏幕调试
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/03/28/%E9%9F%B3%E6%9F%B1%E8%B0%83%E8%AF%95/" rel="next" title="音柱调试">
      音柱调试 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BD%91%E5%85%B3"><span class="nav-number">1.</span> <span class="nav-text">网关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Mosquitto"><span class="nav-number">1.1.</span> <span class="nav-text">Mosquitto</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#subscribe"><span class="nav-number">1.1.1.</span> <span class="nav-text">subscribe</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Qos"><span class="nav-number">1.1.2.</span> <span class="nav-text">Qos</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%81%E8%AE%B8%E5%90%8C%E4%B8%AA%E8%B4%A6%E5%8F%B7%E5%A4%9A%E7%AB%AF%E7%99%BB%E9%99%86"><span class="nav-number">1.1.3.</span> <span class="nav-text">允许同个账号多端登陆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#publisher"><span class="nav-number">1.1.4.</span> <span class="nav-text">publisher</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9E%E7%BB%AD%E5%88%9B%E5%BB%BA%E5%A4%9A%E4%B8%AAsubscriber"><span class="nav-number">1.1.5.</span> <span class="nav-text">连续创建多个subscriber</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E8%87%AA%E5%B7%B1%E7%9A%84%E4%BB%A3%E7%A0%81%E8%87%AA%E4%BF%A1"><span class="nav-number">1.1.6.</span> <span class="nav-text">对自己的代码自信</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E5%85%B3%E8%87%AA%E5%B7%B1%E7%9A%84jvm"><span class="nav-number">1.1.7.</span> <span class="nav-text">网关自己的jvm</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8"><span class="nav-number">1.1.8.</span> <span class="nav-text">端口占用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="nav-number">1.1.9.</span> <span class="nav-text">端口号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bci"><span class="nav-number">1.1.10.</span> <span class="nav-text">bci</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%86%E7%A0%81%E9%94%99%E8%AF%AF"><span class="nav-number">1.1.11.</span> <span class="nav-text">密码错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MQTT%E5%85%A8%E5%B1%80%E7%9B%91%E5%90%AC"><span class="nav-number">1.1.12.</span> <span class="nav-text">MQTT全局监听</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux%E7%89%88%E6%9C%AC"><span class="nav-number">1.1.13.</span> <span class="nav-text">Linux版本</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#apoll"><span class="nav-number">1.2.</span> <span class="nav-text">apoll</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E5%85%B3lan%E5%8F%A3"><span class="nav-number">1.3.</span> <span class="nav-text">网关lan口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WAN"><span class="nav-number">1.4.</span> <span class="nav-text">WAN</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SIM"><span class="nav-number">1.5.</span> <span class="nav-text">SIM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%A5%E6%8E%A5"><span class="nav-number">1.6.</span> <span class="nav-text">桥接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java-ME"><span class="nav-number">1.7.</span> <span class="nav-text">Java ME</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#josh-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="nav-number">2.</span> <span class="nav-text">josh 环境配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A9%B1%E5%8A%A8"><span class="nav-number">2.1.</span> <span class="nav-text">驱动</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#josh-E9500%E7%BD%91%E5%85%B3%E5%BC%80%E5%8F%91"><span class="nav-number">3.</span> <span class="nav-text">josh-E9500网关开发</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%98%E6%96%B9demo"><span class="nav-number">3.1.</span> <span class="nav-text">官方demo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5jar%E5%8C%85"><span class="nav-number">3.2.</span> <span class="nav-text">导入jar包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%BC%E5%87%BAjar%E5%8C%85"><span class="nav-number">3.3.</span> <span class="nav-text">导出jar包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%88%E5%B9%B6jar%E5%8C%85"><span class="nav-number">3.4.</span> <span class="nav-text">合并jar包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%90%E8%A1%8Cjar%E5%8C%85"><span class="nav-number">3.5.</span> <span class="nav-text">运行jar包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#clcd%EF%BC%88Josh%E8%BF%90%E8%A1%8Cjar%E5%8C%85%E7%9A%84%E5%B7%A5%E5%85%B7%EF%BC%89"><span class="nav-number">3.6.</span> <span class="nav-text">clcd（Josh运行jar包的工具）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#adb%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93"><span class="nav-number">3.7.</span> <span class="nav-text">adb文件传输</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AA%E7%BB%88%E7%AB%AF"><span class="nav-number">3.8.</span> <span class="nav-text">多个终端</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux%E7%89%88%E6%9C%AC-1"><span class="nav-number">3.9.</span> <span class="nav-text">Linux版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#windows-%E9%98%B2%E7%81%AB%E5%A2%99"><span class="nav-number">3.10.</span> <span class="nav-text">windows 防火墙</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TCP"><span class="nav-number">3.11.</span> <span class="nav-text">TCP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MQTT%E5%85%A8%E5%B1%80%E7%9B%91%E5%90%AC-1"><span class="nav-number">3.12.</span> <span class="nav-text">MQTT全局监听</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP%E4%B8%8ETCP"><span class="nav-number">3.13.</span> <span class="nav-text">HTTP与TCP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TFTP"><span class="nav-number">3.14.</span> <span class="nav-text">TFTP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IP%E5%87%86%E5%85%A5"><span class="nav-number">3.14.1.</span> <span class="nav-text">IP准入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8A%E4%BC%A0%E8%AE%BE%E7%BD%AE"><span class="nav-number">3.14.2.</span> <span class="nav-text">上传设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE"><span class="nav-number">3.14.3.</span> <span class="nav-text">防火墙配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93"><span class="nav-number">3.14.4.</span> <span class="nav-text">文件传输</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BD%91%E5%85%B3-1"><span class="nav-number">3.14.4.1.</span> <span class="nav-text">网关</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#win10"><span class="nav-number">3.14.4.2.</span> <span class="nav-text">win10</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GPL"><span class="nav-number">3.15.</span> <span class="nav-text">GPL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Busy-Box"><span class="nav-number">3.15.1.</span> <span class="nav-text">Busy Box</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Unix-and-Linux"><span class="nav-number">3.15.2.</span> <span class="nav-text">Unix and Linux</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#adb"><span class="nav-number">3.16.</span> <span class="nav-text">adb</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Java"><span class="nav-number">4.</span> <span class="nav-text">Java</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#intellij%E5%AF%BC%E5%87%BAjar%E5%8C%85"><span class="nav-number">4.1.</span> <span class="nav-text">intellij导出jar包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-%E4%B8%8B%E6%9F%A5%E7%9C%8B%E8%A7%81%E7%9B%91%E5%90%AC"><span class="nav-number">4.2.</span> <span class="nav-text">Linux 下查看见监听</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C"><span class="nav-number">5.</span> <span class="nav-text">网络</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#wan%E5%92%8Clan%E8%A6%81%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%BD%91%E6%AE%B5"><span class="nav-number">5.1.</span> <span class="nav-text">wan和lan要在不同网段</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#VPN"><span class="nav-number">6.</span> <span class="nav-text">VPN</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#VPN%E8%87%AA%E5%90%AF%E5%8A%A8"><span class="nav-number">6.1.</span> <span class="nav-text">VPN自启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iptable"><span class="nav-number">6.2.</span> <span class="nav-text">iptable</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PPTP"><span class="nav-number">6.3.</span> <span class="nav-text">PPTP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ping%E7%AB%AF%E5%8F%A3"><span class="nav-number">6.4.</span> <span class="nav-text">ping端口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="nav-number">6.5.</span> <span class="nav-text">路由配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#VPN%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF"><span class="nav-number">6.5.1.</span> <span class="nav-text">VPN服务器端</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E7%AB%AF"><span class="nav-number">6.5.2.</span> <span class="nav-text">路由器端</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%8F%A3%E9%85%8D%E7%BD%AE"><span class="nav-number">7.</span> <span class="nav-text">服务器端口配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#shell%E8%84%9A%E6%9C%AC"><span class="nav-number">8.</span> <span class="nav-text">shell脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E8%84%9A%E6%9C%AC"><span class="nav-number">8.1.</span> <span class="nav-text">路由脚本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E6%89%A7%E8%A1%8C-Crontab"><span class="nav-number">8.2.</span> <span class="nav-text">定时执行 Crontab</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%86%99shell%E8%84%9A%E6%9C%AC"><span class="nav-number">8.3.</span> <span class="nav-text">为什么写shell脚本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E5%BC%95%E5%8F%B7"><span class="nav-number">8.4.</span> <span class="nav-text">反引号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%83%E9%99%90"><span class="nav-number">8.5.</span> <span class="nav-text">权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%87%8F"><span class="nav-number">8.6.</span> <span class="nav-text">变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86"><span class="nav-number">8.7.</span> <span class="nav-text">字符串处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0%E6%96%87%E4%BB%B6"><span class="nav-number">8.8.</span> <span class="nav-text">输出结果重定向到文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8A%A5%E9%94%99"><span class="nav-number">8.9.</span> <span class="nav-text">报错</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#grep"><span class="nav-number">8.10.</span> <span class="nav-text">grep</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0"><span class="nav-number">8.10.1.</span> <span class="nav-text">命令行参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AAgrep"><span class="nav-number">8.10.2.</span> <span class="nav-text">多个grep</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B%E5%88%86%E6%9E%90"><span class="nav-number">8.10.3.</span> <span class="nav-text">实例分析</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#awk"><span class="nav-number">8.11.</span> <span class="nav-text">awk</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2slice"><span class="nav-number">8.12.</span> <span class="nav-text">字符串slice</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83"><span class="nav-number">8.13.</span> <span class="nav-text">字符串比较</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%A4%E7%A9%BA"><span class="nav-number">8.14.</span> <span class="nav-text">字符串判空</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E7%BB%84"><span class="nav-number">8.15.</span> <span class="nav-text">数组</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="FreeJim"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">FreeJim</p>
  <div class="site-description" itemprop="description">Hello World</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">301</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">36</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">FreeJim</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

  <script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script>
</body>
</html>
